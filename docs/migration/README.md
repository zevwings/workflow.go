# 迁移文档

本目录用于存放 Workflow CLI 各个版本之间的配置迁移说明文档。

## 📋 说明

迁移文档用于记录和说明配置格式变化、迁移步骤、验证方法等关键信息，帮助用户顺利完成配置迁移。

**重要**：迁移版本号独立于软件版本号！
- **软件版本**（如 `1.4.8`）：表示软件本身的版本
- **迁移版本**（如 `v1.0.0`）：表示配置格式的版本，只有当配置格式变化时才需要迁移

**当前状态**：项目当前无需进行任何配置迁移。当配置格式发生变化时，将在此处添加相应的迁移文档。

## 📝 文档规范

### 模板使用

每个迁移文档应参考以下模板编写：

**模板位置**：`docs/templates/migration/migration.template`

该模板提供了标准的迁移文档结构，包括：

- **概述**：迁移背景、版本说明、重要提示
- **配置变化**：配置格式变化、新旧格式对比
- **迁移步骤**：自动迁移脚本、手动迁移步骤
- **迁移验证**：验证迁移是否成功的方法
- **注意事项**：迁移过程中需要注意的事项
- **回滚说明**：如何回滚迁移（如适用）
- **常见问题**：迁移过程中可能遇到的问题和解决方案

### 文档命名

迁移文档应使用版本号命名，例如：
- `v1.0.0-to-v1.1.0.md` - 从 v1.0.0 升级到 v1.1.0 的迁移说明
- `v1.1.0-to-v2.0.0.md` - 从 v1.1.0 升级到 v2.0.0 的迁移说明

### 文档位置

- 迁移文档应存放在 `docs/migration/` 目录下
- 每个迁移版本对应一个独立的文档文件

## 🎯 使用指南

### 创建新迁移文档

1. 复制模板文件：
   ```bash
   cp docs/templates/migration/migration.template docs/migration/{旧版本}-to-{新版本}.md
   ```

2. 根据模板中的占位符（`{旧版本}`、`{新版本}`、`{配置变化}` 等）填写实际内容

3. 确保文档包含以下关键信息：
   - 迁移的背景和原因
   - 详细的配置格式变化和对比
   - 清晰的迁移步骤（自动和手动）
   - 迁移验证方法
   - 注意事项和常见问题

### 更新现有迁移文档

当迁移步骤或验证方法发生变化时，应及时更新对应的迁移文档。

## 📚 迁移文档列表

当前暂无需要迁移的版本。

当配置格式发生变化时，迁移文档将在此处列出。

## 🚀 如何执行迁移

当有需要迁移的版本时，可以使用以下命令：

### 预览迁移（推荐）

在正式执行迁移前，建议先预览迁移结果：

```bash
workflow migrate --dry-run
```

### 执行迁移

执行所有待迁移的版本：

```bash
workflow migrate
```

### 执行迁移并清理旧文件

执行迁移并删除旧的配置文件：

```bash
workflow migrate cleanup
```

**注意**：当前没有需要迁移的版本，上述命令将提示无需迁移。

## 🔄 迁移系统说明

迁移系统采用版本化设计，每个配置格式变化都有对应的迁移版本。

详细的技术实现说明请参考 [`docs/architecture/migrate.md`](../architecture/migrate.md)（如果已实现）。

## 📚 相关文档

- [迁移文档模板](../../templates/migration/migration.template)
- [架构文档](../architecture/README.md)
- [开发规范](../development/README.md)

---

**最后更新**: 2025-01-28
